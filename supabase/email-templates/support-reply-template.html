<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Respuesta Ticket de Soporte - Natillerapp</title>
  <!--[if mso]>
  <style type="text/css">
    body, table, td {font-family: Arial, sans-serif !important;}
  </style>
  <![endif]-->
  <style>
    /* Estilos para compatibilidad con Gmail */
    @media only screen and (max-width: 600px) {
      .email-container { width: 100% !important; }
      .content-padding { padding: 30px 20px !important; }
    }
  </style>
</head>
<body style="margin: 0; padding: 0; background: linear-gradient(135deg, #cbd5e1 0%, #e5e7eb 50%, #a7f3d0 100%); font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;">
  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background: linear-gradient(135deg, #cbd5e1 0%, #e5e7eb 50%, #a7f3d0 100%); padding: 40px 20px;">
    <tr>
      <td align="center">
        <!-- Contenedor principal -->
        <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" class="email-container" style="max-width: 600px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 24px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); border: 1px solid rgba(255, 255, 255, 0.5); overflow: hidden;">
          
          <!-- Header con gradiente -->
          <tr>
            <td style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); padding: 40px 30px; text-align: center;">
              <h1 style="margin: 0; font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 32px; font-weight: 700; color: #ffffff; letter-spacing: -0.5px;">
                üå± Natillerapp
              </h1>
              <p style="margin: 8px 0 0 0; font-size: 16px; color: rgba(255, 255, 255, 0.95); font-weight: 500;">
                Soporte T√©cnico
              </p>
            </td>
          </tr>

          <!-- Contenido principal -->
          <tr>
            <td class="content-padding" style="padding: 50px 40px;">
              
              <!-- Badge de Ticket -->
              <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                <tr>
                  <td align="center" style="padding-bottom: 30px;">
                    <div id="ticketBadge" style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 50px; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);">
                      <span style="font-family: 'Outfit', sans-serif; font-size: 14px; font-weight: 700; color: #ffffff; text-transform: uppercase; letter-spacing: 1px;">
                        Ticket #<span id="ticketNumber">XXXX</span>
                      </span>
                    </div>
                  </td>
                </tr>
              </table>

              <!-- Icono de soporte -->
              <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                <tr>
                  <td align="center" style="padding-bottom: 30px;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 50%; display: inline-block; box-shadow: 0 10px 25px -5px rgba(34, 197, 94, 0.3); position: relative;">
                      <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 40px;">
                        üí¨
                      </div>
                    </div>
                  </td>
                </tr>
              </table>

              <!-- T√≠tulo -->
              <h2 style="margin: 0 0 20px 0; font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 28px; font-weight: 700; color: #1f2937; text-align: center; line-height: 1.3;">
                Respuesta a tu solicitud de soporte
              </h2>

              <!-- Mensaje principal -->
              <p style="margin: 0 0 25px 0; font-size: 16px; line-height: 1.6; color: #4b5563; text-align: center;">
                Hola,
              </p>
              <p style="margin: 0 0 25px 0; font-size: 16px; line-height: 1.6; color: #4b5563; text-align: left;">
                Gracias por contactarnos. Hemos revisado tu solicitud de soporte <strong style="color: #16a34a;">#<span id="ticketNumberText">XXXX</span></strong> y estamos aqu√≠ para ayudarte.
              </p>

              <!-- √Årea de respuesta -->
              <div style="margin: 30px 0; padding: 25px; background: #f9fafb; border-radius: 12px; border-left: 4px solid #22c55e;">
                <p style="margin: 0 0 15px 0; font-size: 14px; font-weight: 600; color: #16a34a; text-transform: uppercase; letter-spacing: 0.5px;">
                  Nuestra respuesta:
                </p>
                <div style="padding: 20px; background: #ffffff; border-radius: 8px; border: 1px solid #e5e7eb;">
                  <!-- Aqu√≠ va el contenido de la respuesta -->
                  <p style="margin: 0; font-size: 15px; line-height: 1.7; color: #374151;">
                    Estimado/a usuario/a,<br><br>
                    
                    Hemos revisado tu consulta y queremos ayudarte a resolverla. Por favor, proporciona m√°s detalles sobre el problema que est√°s experimentando para poder asistirte de manera m√°s efectiva.<br><br>
                    
                    Si tienes alguna pregunta adicional, no dudes en responder a este correo. Estamos aqu√≠ para ayudarte.<br><br>
                    
                    Saludos cordiales,<br>
                    <strong>Equipo de Soporte Natillerapp</strong>
                  </p>
                </div>
              </div>

              <!-- Informaci√≥n adicional -->
              <div style="margin-top: 30px; padding: 20px; background: #fef3c7; border-radius: 12px; border-left: 4px solid #f59e0b;">
                <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.6; color: #92400e; text-align: center; font-weight: 600;">
                  ‚ÑπÔ∏è Informaci√≥n importante
                </p>
                <p style="margin: 0; font-size: 13px; line-height: 1.6; color: #78350f; text-align: center;">
                  Por favor, mant√©n este ticket de referencia en todas tus respuestas para un seguimiento m√°s eficiente.
                </p>
              </div>

              <!-- Bot√≥n de responder (opcional - para implementar funcionalidad) -->
              <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-top: 35px;">
                <tr>
                  <td align="center">
                    <div style="display: inline-block; padding: 14px 32px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(34, 197, 94, 0.3), 0 4px 6px -2px rgba(34, 197, 94, 0.2);">
                      <a href="#" id="replyButton" style="color: #ffffff; text-decoration: none; font-size: 16px; font-weight: 600; font-family: 'DM Sans', sans-serif;">
                        Responder a este ticket
                      </a>
                    </div>
                  </td>
                </tr>
              </table>

            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td style="background: #f9fafb; padding: 30px 40px; text-align: center; border-top: 1px solid #e5e7eb;">
              <p style="margin: 0 0 15px 0; font-size: 13px; color: #6b7280; line-height: 1.6;">
                <strong>¬øNecesitas m√°s ayuda?</strong><br>
                Responde a este correo y nuestro equipo te asistir√° lo antes posible.
              </p>
              <p style="margin: 0 0 20px 0; font-size: 12px; color: #9ca3af; line-height: 1.6;">
                Este es un correo autom√°tico. Por favor, no respondas directamente si no es necesario.
              </p>
              <p style="margin: 0; font-size: 12px; color: #9ca3af; line-height: 1.6;">
                ¬© 2024 Natillerapp. Plataforma de Ahorro Comunitario Digital. üå±
              </p>
            </td>
          </tr>

        </table>
      </td>
    </tr>
  </table>

  <script>
    // Script para manejar el n√∫mero de ticket y configurar el bot√≥n de respuesta
    (function() {
      // Obtener el n√∫mero de ticket de la URL o par√°metros
      function getTicketNumber() {
        // Opci√≥n 1: Desde par√°metro de URL
        const urlParams = new URLSearchParams(window.location.search);
        const ticketFromUrl = urlParams.get('ticket');
        if (ticketFromUrl) return ticketFromUrl;
        
        // Opci√≥n 2: Desde variable global (si se define antes de cargar)
        if (typeof window.TICKET_NUMBER !== 'undefined') {
          return window.TICKET_NUMBER;
        }
        
        // Opci√≥n 3: Desde atributo data en el body
        const bodyTicket = document.body.getAttribute('data-ticket-number');
        if (bodyTicket) return bodyTicket;
        
        // Opci√≥n 4: Valor por defecto (cambiar por el valor real)
        return 'XXXX';
      }

      // Funci√≥n para configurar el asunto del correo
      function setupReplyButton(ticketNumber) {
        const replyButton = document.getElementById('replyButton');
        if (!replyButton) return;

        // Crear el asunto del correo
        const subject = 'Respuesta ticket ' + ticketNumber;
        
        // Intentar obtener el email del remitente desde el correo actual (si estamos en Gmail)
        // Para uso en Gmail, crear un enlace mailto que Gmail reconocer√°
        const body = '---\nRespuesta al ticket #' + ticketNumber + '\n---\n\n';
        
        // Crear el mailto link con el asunto y body predefinido
        const mailtoLink = 'mailto:?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(body);
        
        replyButton.href = mailtoLink;
        
        // Guardar el ticket number para uso posterior
        replyButton.setAttribute('data-ticket', ticketNumber);
      }

      // Inicializar cuando el DOM est√© listo
      function init() {
        const ticketNumber = getTicketNumber();
        
        // Actualizar todos los lugares donde aparece el n√∫mero de ticket
        const ticketElements = document.querySelectorAll('#ticketNumber, #ticketNumberText');
        ticketElements.forEach(function(el) {
          el.textContent = ticketNumber;
        });

        // Configurar el bot√≥n de respuesta
        setupReplyButton(ticketNumber);
      }

      // Ejecutar cuando el DOM est√© listo
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>

